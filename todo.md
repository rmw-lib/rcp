高速传输模式

低速通讯模式

-----

收到的包数

每 16 毫秒 发送 16 个包
持续 16 次 （256 毫秒）
然后每 16 毫秒 1 个包 持续 256 尺

包数变多 发送窗口

分享文件夹
文件分享的更新
请求一个文件

创建用户

  用户名称

  用户公钥 - 用户 id

  用户 id - 用户名称

  用户 id - 用户私钥

创建频道

  频道名称

  生成 key

  创建文件夹

写入文件到频道
频道添加本地文件软连接到 hash

请求 频道哈希 路径

路径 - 文件

按照路径请求文件
按照哈希请求文件

请求编号 请求方式 路径 偏移量

---

p2p 聊天室

聊天室公钥

频道

  频道公钥
    - 创建者 公钥
      - 管理者 公钥
        - 编辑  公钥
    - 订阅者

最新一条记录的创建时间
最新一个记录文件的创建时间

---

共享网盘

群主
  上传
  下载

pagerank

---

磁盘带宽银行

收录所有节点

交换存储

---

请求
  频道公钥哈希
  文件 id 偏移

目录文件

0 内容频道 最后更新时间
1 聊天频道 最后更新时间
2 权限频道 最后更新时间

最新消息文件

频道公钥 0
频道公钥 1
频道公钥 2

上一个消息文件的内容哈希

对之后内容哈希的签名 (u64)
消息创建时间 (u64)
消息类型 (u16)
内容大小（u16)

上一个消息文件的哈希 == blake3 空字符串 ，就 break

---

请求文件路径
响应文件

创建频道
列出订阅的频道
登记频道的订阅用户的 ip (有效期 1 小时)
  开始区间 结束区间 ip 地址

频道

ip 地址

一种文本格式，记录站点更新

* 用户
* 频道
* 节点

一个频道可以有多个用户订阅
一个用户

订阅频道

频道更新

协议版本
发布时间
路径 文件大小 文件哈希
路径 文件大小 文件哈希
路径 文件大小 文件哈希
